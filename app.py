import streamlit as st

# 페이지 타이틀
st.set_page_config(page_title="코스모스")
st.title("코스모스 KOSMORSE - 한글/영문 모스부호 변환기")

# 영문 + 특수문자
morse_code_dict = {
    'A':'.-','B':'-...','C':'-.-.','D':'-..','E':'.','F':'..-.','G':'--.','H':'....',
    'I':'..','J':'.---','K':'-.-','L':'.-..','M':'--','N':'-.','O':'---','P':'.--.',
    'Q':'--.-','R':'.-.','S':'...','T':'-','U':'..-','V':'...-','W':'.--','X':'-..-',
    'Y':'-.--','Z':'--..',
    '1':'.----','2':'..---','3':'...--','4':'....-','5':'.....','6':'-....','7':'--...',
    '8':'---..','9':'----.','0':'-----',
    '.':'.-.-.-',',':'--..--','?':'..--..',"'":'.----.','!':'-.-.--','/':'-..-.',
    '(':'-.--.',')':'-.--.-','&':'.-...',':':'---...', ';':'-.-.-.','=':'-...-',
    '+':'.-.-.','-':'-....-','_':'..--.-','"':'.-..-.','$':'...-..-','@':'.--.-.',' ':'/'
}

# 한글 자모 → 모스부호
korean_morse_base = {
    'ㄱ': '..-.', 'ㄲ': '..-. ..-.', 'ㄴ': '.-..', 'ㄷ': '-...', 'ㄸ': '-... -...',
    'ㄹ': '...-', 'ㅁ': '--', 'ㅂ': '.--', 'ㅃ': '.-- .--', 'ㅅ': '--.', 'ㅆ': '--. --.',
    'ㅇ': '-.-', 'ㅈ': '.--.', 'ㅉ': '.--. .--.', 'ㅊ': '-.-.', 'ㅋ': '-..-', 'ㅌ': '--..',
    'ㅍ': '---', 'ㅎ': '.---',
    'ㅏ': '.', 'ㅐ': '-.--', 'ㅑ': '..', 'ㅒ': '-.-- ..-', 'ㅓ': '-', 'ㅔ': '-.--',
    'ㅕ': '...', 'ㅖ': '... ..-', 'ㅗ': '.-', 'ㅘ': '.- .', 'ㅙ': '.- --.-', 'ㅚ': '.- ..-',
    'ㅛ': '-.', 'ㅜ': '....', 'ㅝ': '.... -', 'ㅞ': '.... -.--', 'ㅟ': '.... ..-',
    'ㅠ': '.-.', 'ㅡ': '-..', 'ㅢ': '-.. ..-', 'ㅣ': '..-',
}

choseong = ['ㄱ','ㄲ','ㄴ','ㄷ','ㄸ','ㄹ','ㅁ','ㅂ','ㅃ','ㅅ','ㅆ','ㅇ','ㅈ','ㅉ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ']
jungseong = ['ㅏ','ㅐ','ㅑ','ㅒ','ㅓ','ㅔ','ㅕ','ㅖ','ㅗ','ㅘ','ㅙ','ㅚ','ㅛ','ㅜ','ㅝ','ㅞ','ㅟ','ㅠ','ㅡ','ㅢ','ㅣ']
jongseong = ['','ㄱ','ㄲ','ㄳ','ㄴ','ㄵ','ㄶ','ㄷ','ㄹ','ㄺ','ㄻ','ㄼ','ㄽ','ㄾ','ㄿ','ㅀ','ㅁ','ㅂ','ㅄ','ㅅ','ㅆ','ㅇ','ㅈ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ']

# 한글 완성형 문자 → 모스 코드
for i in range(0xAC00, 0xD7A4):
    syllable = chr(i)
    index = i - 0xAC00
    cho = choseong[index // 588]
    jung = jungseong[(index % 588) // 28]
    jong = jongseong[index % 28]
    parts = [cho, jung]
    if jong != '':
        parts.append(jong)
    morse = ' '.join([korean_morse_base.get(p, '?') for p in parts if p in korean_morse_base])
    morse_code_dict[syllable] = morse

# 번역 함수
def translate_to_morse_code(text):
    result = []
    for ch in text:
        key = ch.upper() if 'A' <= ch.upper() <= 'Z' or ch.isdigit() else ch
        result.append(morse_code_dict.get(key, '?'))
    return ' '.join(result)

# 사용자 입력
user_input = st.text_input("번역할 문장을 입력하세요 (한글, 영어 가능)")
if st.button("모스부호로 변환하기"):
    st.write("입력한 문장:", user_input)
    st.write("변환된 모스부호:", translate_to_morse_code(user_input))